{%extends "base.html" %} {%block title%}Battle{%endblock%} {%block styles%}
<link
  rel="stylesheet"
  href="{{url_for('static', filename='css/battles.css')}}"
/>
{%endblock%} {%block content%}
<div class="screen-container">
  <div class="grid-container">
    <div class="moves-container">
      <form method="POST" action="{{ url_for('battle.attack') }}">
        <div class="moves-grid">
          {% for move in session.pokemon_player_moves %}

          <button
            type="submit"
            name="move"
            value="{{ move['name'] }}"
            class="move-button {{ move.type }}"
          >
            <span class="move-name">{{ move.name | title }}</span>

            <div class="move-details">
              <span class="m-power">Power: {{ move.power }}</span>
              <span class="m-type-tag {{ move.type }}"
                >Type: {{ move.type }}</span
              >
            </div>
          </button>

          {% endfor %}
        </div>
      </form>
    </div>
    <div
      class="pokemon1-container {% if pokemon.name=='pikachu' %} pikachu{% endif %}"
    >
      <div class="name-hp-container">
        <p class="name">{{pokemon.name}}</p>
        <div class="health">
          <p class="hp">HP:</p>
          <p class="health-bar">
            {{battle.player_health}}/{{pokemon.stats[0].value}}
          </p>
        </div>
      </div>
      <div class="img-container">
        <img src="{{pokemon.sprites.back_default}}" alt="" />
      </div>
    </div>
    <div
      class="pokemon2-container {% if pokemon_enemy.name=='pikachu' %} pikachu {% endif %}"
    >
      <div class="name-hp-container">
        <p class="name">{{pokemon_enemy.name }}</p>
        <div class="health">
          <p class="hp">HP:</p>
          <p class="health-bar">
            {{battle.enemy_health}}/{{pokemon_enemy.stats[0].value}}
          </p>
        </div>
      </div>
      <div class="img-container">
        <img src="{{pokemon_enemy.sprites.front_default}}" alt="" />
      </div>
    </div>
    <div class="log-container">
      {% if session.battle.log %}
      <div class="battle-log">
        <h3>Battle log:</h3>
        <ul>
          {% for entry in session.battle.log %}
          <li>{{ entry }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{%endblock%}
